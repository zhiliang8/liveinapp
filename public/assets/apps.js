/*
 * Auto Expanding Text Area (1.2.2)
 * by Chrys Bader (www.chrysbader.com)
 * chrysb@gmail.com
 *
 * Special thanks to:
 * Jake Chapa - jake@hybridstudio.com
 * John Resig - jeresig@gmail.com
 *
 * Copyright (c) 2008 Chrys Bader (www.chrysbader.com)
 * Licensed under the GPL (GPL-LICENSE.txt) license.
 *
 *
 * NOTE: This script requires jQuery to work.  Download jQuery at www.jquery.com
 *
 */
(function(a){var b=null;a.fn.autogrow=function(b){return this.each(function(){new a.autogrow(this,b)})},a.autogrow=function(b,c){this.options=c||{},this.dummy=null,this.interval=null,this.line_height=this.options.lineHeight||parseInt(a(b).css("line-height")),this.min_height=this.options.minHeight||parseInt(a(b).css("min-height")),this.max_height=this.options.maxHeight||parseInt(a(b).css("max-height")),this.expand_callback=this.options.expandCallback,this.textarea=a(b),this.line_height==NaN&&(this.line_height=0),this.init()},a.autogrow.fn=a.autogrow.prototype={autogrow:"1.2.2"},a.autogrow.fn.extend=a.autogrow.extend=a.extend,a.autogrow.fn.extend({init:function(){var a=this;this.textarea.css({overflow:"hidden",display:"block"}),this.textarea.bind("focus",function(){a.startExpand()}).bind("blur",function(){a.stopExpand()}),this.checkExpand()},startExpand:function(){var a=this;this.interval=window.setInterval(function(){a.checkExpand()},400)},stopExpand:function(){clearInterval(this.interval)},checkExpand:function(){this.dummy==null&&(this.dummy=a("<div></div>"),this.dummy.css({"font-size":this.textarea.css("font-size"),"font-family":this.textarea.css("font-family"),width:this.textarea.css("width"),"padding-top":this.textarea.css("padding-top"),"padding-right":this.textarea.css("padding-right"),"padding-bottom":this.textarea.css("padding-bottom"),"padding-left":this.textarea.css("padding-left"),"line-height":this.line_height+"px","overflow-x":"hidden",position:"absolute",top:0,left:-9999}).appendTo("body"));var b=this.textarea.val().replace(/(<|>)/g,"");a.browser.msie?b=b.replace(/\n/g,"<BR>new"):b=b.replace(/\n/g,"<br>new"),this.dummy.html()!=b&&(this.dummy.html(b),this.max_height>0&&this.dummy.height()+this.line_height>this.max_height?this.textarea.css("overflow-y","auto"):(this.textarea.css("overflow-y","hidden"),(this.textarea.height()<this.dummy.height()+this.line_height||this.dummy.height()<this.textarea.height())&&this.textarea.animate({height:this.dummy.height()+this.line_height+"px"},100)));if(this.expand_callback){var c=this;window.setTimeout(function(){c.expand_callback()},500)}}})})(jQuery),window.jQuery&&function(a){if(a.browser.msie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}a.fn.rating=function(b){if(this.length==0)return this;if(typeof arguments[0]=="string"){if(this.length>1){var c=arguments;return this.each(function(){a.fn.rating.apply(a(this),c)})}return a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]),this}var b=a.extend({},a.fn.rating.options,b||{});return a.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var c,d=a(this),e=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),f=a(this.form||document.body),g=f.data("rating");if(!g||g.call!=a.fn.rating.calls)g={count:0,call:a.fn.rating.calls};var h=g[e];h&&(c=h.data("rating"));if(h&&c)c.count++;else{c=a.extend({},b||{},(a.metadata?d.metadata():a.meta?d.data():null)||{},{count:0,stars:[],inputs:[]}),c.serial=g.count++,h=a('<span class="star-rating-control"/>'),d.before(h),h.addClass("rating-to-be-drawn");if(d.attr("disabled")||d.hasClass("disabled"))c.readOnly=!0;d.hasClass("required")&&(c.required=!0),h.append(c.cancel=a('<div class="rating-cancel"><a title="'+c.cancel+'">'+c.cancelValue+"</a></div>").mouseover(function(){a(this).rating("drain"),a(this).addClass("star-rating-hover")}).mouseout(function(){a(this).rating("draw"),a(this).removeClass("star-rating-hover")}).click(function(){a(this).rating("select")}).data("rating",c))}var i=a('<div class="star-rating rater-'+c.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");h.append(i),this.id&&i.attr("id",this.id),this.className&&i.addClass(this.className),c.half&&(c.split=2);if(typeof c.split=="number"&&c.split>0){var j=(a.fn.width?i.width():0)||c.starWidth,k=c.count%c.split,l=Math.floor(j/c.split);i.width(l).find("a").css({"margin-left":"-"+k*l+"px"})}c.readOnly?i.addClass("star-rating-readonly"):i.addClass("star-rating-live").mouseover(function(){a(this).rating("fill"),a(this).rating("focus")}).mouseout(function(){a(this).rating("draw"),a(this).rating("blur")}).click(function(){a(this).rating("select")}),this.checked&&(c.current=i),this.nodeName=="A"&&a(this).hasClass("selected")&&(c.current=i),d.hide(),d.change(function(){a(this).rating("select")}),i.data("rating.input",d.data("rating.star",i)),c.stars[c.stars.length]=i[0],c.inputs[c.inputs.length]=d[0],c.rater=g[e]=h,c.context=f,d.data("rating",c),h.data("rating",c),i.data("rating",c),f.data("rating",g)}),a(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},a.extend(a.fn.rating,{calls:0,focus:function(){var b=this.data("rating");if(!b)return this;if(!b.focus)return this;var c=a(this).data("rating.input")||a(this.tagName=="INPUT"?this:null);b.focus&&b.focus.apply(c[0],[c.val(),a("a",c.data("rating.star"))[0]])},blur:function(){var b=this.data("rating");if(!b)return this;if(!b.blur)return this;var c=a(this).data("rating.input")||a(this.tagName=="INPUT"?this:null);b.blur&&b.blur.apply(c[0],[c.val(),a("a",c.data("rating.star"))[0]])},fill:function(){var a=this.data("rating");if(!a)return this;if(a.readOnly)return;this.rating("drain"),this.prevAll().andSelf().filter(".rater-"+a.serial).addClass("star-rating-hover")},drain:function(){var a=this.data("rating");if(!a)return this;if(a.readOnly)return;a.rater.children().filter(".rater-"+a.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var b=this.data("rating");if(!b)return this;this.rating("drain"),b.current?(b.current.data("rating.input").attr("checked","checked"),b.current.prevAll().andSelf().filter(".rater-"+b.serial).addClass("star-rating-on")):a(b.inputs).removeAttr("checked"),b.cancel[b.readOnly||b.required?"hide":"show"](),this.siblings()[b.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(b,c){var d=this.data("rating");if(!d)return this;if(d.readOnly)return;d.current=null;if(typeof b!="undefined"){if(typeof b=="number")return a(d.stars[b]).rating("select",undefined,c);typeof b=="string"&&a.each(d.stars,function(){a(this).data("rating.input").val()==b&&a(this).rating("select",undefined,c)})}else d.current=this[0].tagName=="INPUT"?this.data("rating.star"):this.is(".rater-"+d.serial)?this:null;this.data("rating",d),this.rating("draw");var e=a(d.current?d.current.data("rating.input"):null);(c||c==undefined)&&d.callback&&d.callback.apply(e[0],[e.val(),a("a",d.current)[0]])},readOnly:function(b,c){var d=this.data("rating");if(!d)return this;d.readOnly=b||b==undefined?!0:!1,c?a(d.inputs).attr("disabled","disabled"):a(d.inputs).removeAttr("disabled"),this.data("rating",d),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),a.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},a(function(){a("input[type=radio].star").rating()})}(jQuery),$(function(){$("#app-tab textarea").autogrow(),$("#latest-news h2 a").toggle(function(){$("#latest-news #news-form").show()},function(){$("#latest-news #news-form").hide()}),$("#latest-news #news-form .cancel").click(function(){$("#latest-news h2 a").click()})});